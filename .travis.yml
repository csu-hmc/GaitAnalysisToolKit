language: generic
os:
  - linux
env:
  matrix:
    - DEP_VERSIONS="oldest"
    - DEP_VERSIONS="latest"
before_install:
  - |
    MINICONDA_URL="https://repo.continuum.io/miniconda"
    MINICONDA_FILE="Miniconda3-latest-Linux-x86_64.sh"
    curl -L -O "${MINICONDA_URL}/${MINICONDA_FILE}"
    bash $MINICONDA_FILE -b
  - source ~/miniconda3/bin/activate root
  - conda config --set always_yes yes
  - conda update -q conda
  - if [[ $DEP_VERSIONS == "oldest" ]]; then
      conda env create -f env-dev-oldest.yml;
      source activate gaitanalysis-dev-oldest;
    elif [[ $DEP_VERSIONS == "latest" ]]; then
      sudo apt-add-repository -y ppa:octave/stable;
      sudo apt-get update;
      conda env create -f env-dev-latest.yml;
      source activate gaitanalysis-dev-latest;
    fi
  - sudo apt-get install -y -qq octave
install:
  - python setup.py install
before_script:
  - octave --version
  - conda info
  - conda list
script:
  - nosetests -v --with-coverage --cover-package=gaitanalysis
  - cd docs
  - make html
